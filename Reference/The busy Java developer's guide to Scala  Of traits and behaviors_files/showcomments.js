if(typeof (dwc)=="undefined"){dwc={};dwc.signIn="Sign in";dwc.register="register";dwc.leaveCmt="to leave a comment.";dwc.addCmts="Add comments";dwc.addCmt="Add comment";dwc.view="View";dwc.totalCmts="Total comments";dwc.postYourCmt="Post your comment";dwc.show="Show:";dwc.recentCmts="Most recent comments";dwc.allCmts="All comments";dwc.tooLongCmt="Your comment has exceeded the 1000-char limit";dwc.numCharsLeft="characters left";dwc.reportAbuse="Report abuse";dwc.postingCmt="Posting comment...";dwc.noCmt="Be the first to add a comment";
dwc.netwkErr="There is a problem in retrieving the comments.  Please refresh the page later.";dwc.btnPost="Post";dwc.enterCmt="Error:  Please add a comment.";dwc.loginErr="Your login status cannot be verified at this point. Please try again later.";dwc.postErr="Your comment cannot be posted at this time.  Please try again later.";dwc.postBy="Posted by <strong>{1}</strong> on {2}";dwc.siteId=1;dwc.lang="";dwc.notifyMsg="Notify me when a comment is added";dwc.htmlWarning="Note: HTML elements are not supported within comments."
}jQuery.fn.showComments=function(E,O,M,D){var P=this.id||"threadShow";var G=E||"95%";var B=O||10;var J=M||"nCmts";var C=D||"icomments";var A=[];var L=0;var I=0;var H=1000;var K=5;var N=10;var F=false;jQuery.noConflict();jQuery(document).ready(function(R){var f=[];var W=0;var h=0;var Y='<img id="imgPlHdr" src="//dw1.s81c.com/developerworks/i/spaces/onex/animateloader_onex.gif" />';var c=function(){A=R.makeArray(R("div.metavalue"));var l={};R.each(A,function(){var m=jQuery(this).text().split("=");l[m[0]]=encodeURIComponent(m[1])
});A=l};var g=function(l){f=[];L=R("totalCount",l).text();if(!L){L=0}R("comment",l).each(function(n){var m=Z(this);f.push(m)})};var U=function(n,l){var m=(typeof l!="undefined"&&l=="true")?L:W+B;m=(L!=0&&m>L)?L:m;W+=B;W=(L!=0&&W>L)?L:W;Q(0,m,function(){R("#numCmts, #numCmts2").html(""+L);R("#"+J).html(L+'&nbsp;(<a class="dw-view-comment" href="#icomments">'+dwc.view+"</a>&nbsp;|&nbsp;<a "+((F!="true")?"onclick=\"window.location='"+location.href.replace(/(#icomments)/g,"").replace(/#/g,"")+'#icomments\';showSignIn(dwc.afterSignIn);return false;" href="#icomments"':'onclick="jQuery(\'#newCmt\').focus();return false;" href="#icomments"')+">"+dwc.addCmt+"</a>"+((F!="true")?" - "+dwc.signIn:"")+")");
if(L==0){R("#topControl, #bottomControl").hide();(h)?R("div#cmtSect").html(V()):R("div#cmtSect").html(a())}if(L>K){R("#dropdownCmts, #dropdownCmts2").show();if(typeof (R("#topControl option[value='all']").val())=="undefined"){R("#topControl select, #bottomControl select").append(R("<option></option>").val("all").html(dwc.allCmts))}}R("#imgPlHdr").remove();n()})};var k=function(l){if(i()){R.ajax({type:"POST",url:"/developerworks/niagara/commentjsp/WSComment.jsp",data:"action=pc&url="+A.ArticleID+"&cn=test"+((l!=undefined&&l!=null&&typeof (l)=="boolean")?"&an="+l:"")+"&cb="+encodeURIComponent(R("#newCmt").attr("value").replace(/(\n){3,}/g,"\n\n").replace(/>/g,"&gt;").replace(/</g,"&lt;"))+"&rn="+Math.random()+"&siteID="+dwc.siteId,dataType:"xml",beforeSend:function(){R("#infoCmt").html('<p class="ibm-ind-link"><a class="ibm-error-link" href="#">'+dwc.postingCmt+"</a></p>");
R(":button#postCmt").attr("disabled",true)},complete:function(){R("#newCmt,:button#postCmt").removeAttr("disabled");R("#infoCmt").text("")},success:function(m){if(R("response",m).text()=="ok"){R("#newCmt").attr("value","");R("div#cmtSect").html("");R("#charCount").html(H);init()}else{alert(R("error",m).text())}},error:function(){alert(dwc.postErr)},timeout:60000})}};var i=function(){var l=false;R("#newCmt").attr("disabled",true);R("#newCmt").attr("value",R.trim(R("#newCmt").attr("value")));if(R("#newCmt").attr("value")==undefined||R("#newCmt").attr("value")==""){R("#infoCmt").html('<p class="ibm-ind-error"><strong>'+dwc.enterCmt+"</strong></p>");
R("#cmtHead").addClass("ibm-error");R("#newCmt").attr("disabled",false)}else{if(R("#newCmt").attr("value").length>H){R("#infoCmt").html('<p class="ibm-ind-error"><strong>'+dwc.tooLongCmt+"</strong></p>");R("#newCmt").attr("disabled",false)}else{l=true}}return l};var Q=function(n,l,m){R.ajax({type:"GET",url:"/developerworks/forums/comment.jspa",data:"contentID="+A.ArticleID+"&start="+n+"&range="+l+"&rn="+Math.random()+"&siteID="+dwc.siteId,dataType:"xml",success:function(o){g(o);R("div#cmtSect").html(f.join(""))
},error:function(o){if(o.responseText.indexOf("Error 500: Cannot find a thread")==0){R("div#cmtSect").html(a())}else{h=1;R("div#cmtSect").html(V())}},complete:function(){m()},async:true})};var e=function(){var l=false;R.ajax({async:false,dataType:"json",url:"/developerworks/dwwi/jsp/Auth.jsp?format=json&rn="+Math.random(),success:function(m){if(typeof (m.status)!="undefined"){l=m.status}}});return l};var Z=function(l){var m="";if(R("profileurl",l).text().length>0){m='<a href="'+R("profileurl",l).text()+'">'+R("author",l).text()+"</a>"
}else{m=R("author",l).text()}return'<div class="comment"><div class="dw-icomment-container"><div class="dw-icomment-body dw-noborder"><div class="dw-icomment-body dw-noborder"><p>'+R("body",l).text()+'</p><p class="ibm-item-note-alternate dw-item-note-alternate-left">'+dwc.postBy.replace(/\{1\}/,m).replace(/\{2\}/,R("time",l).text())+'</p><p class="ibm-ind-link ibm-item-note-alternate dw-item-note-alternate-right"><a class="ibm-caution-link dw-report-abuse" href="/developerworks/forums/forum.jspa?forumID=1317" target="_blank">'+dwc.reportAbuse+'</a></p><div class="dw-clear-both"></div></div></div></div></div>'
};var a=function(){return'<div class="comment"><div class="dw-icomment-container"><table class="dw-icomment-body" cellpadding="0" cellspacing="0" width="100%"><tr><td><p>'+dwc.noCmt+"</p></td></tr></table></div></div>"};var V=function(){return'<div class="comment"><div class="dw-icomment-container"><table class="dw-icomment-body" cellpadding="0" cellspacing="0" width="100%"><tr><td><p>'+dwc.netwkErr+"</p></td></tr></table></div></div>"};var d=function(){var l='<div class="ibm-container ibm-alternate-two dw-commentbox dw-noborder"><p id="cmtHead"><label for="newCmt"><strong>'+dwc.addCmt+':</strong></label></p><div class="ibm-container-body dw-commentbox dw-noborder">';
if(F!="true"){l+='<p id="signInSect"><a onclick="showSignIn(dwc.afterSignIn);return false;" href="#">'+dwc.signIn+'</a> or <a href="/developerworks/dwwi/DWAuthRouter?m=register&lang='+dwc.lang+"&d="+encodeURIComponent(window.location+"#"+C)+'">'+dwc.register+"</a> "+dwc.leaveCmt+"</p>"}l+="<p>"+dwc.htmlWarning+'</p><span id="infoCmt" /><form focus="name" enctype="multipart/form-data" method="post" action="" name="form" class="ibm-column-form"><p><textarea cols="120" rows="5" name="newCmt" id="newCmt" class="dw-inoperable"></textarea><br /><div id="notifiedSect"><label for="comment_notification"><span><input type="checkbox" name="comment_notification" id="comment_notification" value="1" disabled/><span id="notifyText" class="ibm-form-note">'+dwc.notifyMsg+'</span></span></label><span id="maxCharsCount" class="ibm-form-note"><span id="charCount">'+H+"</span> "+dwc.numCharsLeft+'</span></div><br /><br /></p><p class="ibm-buttons-row"><input type="button" value="'+dwc.btnPost+'" jquery1275054459750="11" name="postCmt" id="postCmt" class="ibm-btn-arrow-sec dw-btn-arrow-sec" alt="'+dwc.postYourCmt+'"/><br /><br /></p></form></div></div>';
return l};var T=function(m,q,o,n,l,p){return'<div id="'+m+'" class="ibm-container ibm-alternate-two dw-comment-totals" style="'+((p)?"":"display:none")+'"><div class="ibm-container-body"><form id="'+q+'" method="get" action=""><p><span class="dw-comment-totals-label"><strong>'+dwc.totalCmts+' (<span id="'+o+'"></span>)</strong></span><span><img src="//dw1.s81c.com/i/c.gif" width="340" height="10" alt="" /></span><span class="dw-how-many-comments-label" style="display:none" id="'+n+'"><label for="'+l+'">'+dwc.show+'</label>&nbsp;<select name="comments" id="'+l+'" class="dw-how-many-comments"><option selected="selected" value="recent">'+dwc.recentCmts+'   </option></select><input type="image" class="ibm-btn-go" name="ibm-go" value="Go" src="//dw1.s81c.com/i/v16/buttons/short-btn.gif" alt="Go"/><br /></span></p></form></div></div>'
};var S=function(){R.ajax({type:"GET",url:"/developerworks/maverick/execute/get_opt_in?",data:"content_id="+A.ArticleID,dataType:"json",success:function(l){if(l["return"]==1){I=l.hash;R("#comment_notification").show();R("#notifyText").show();R("#notifyText").removeClass("ibm-form-note");R("input[name=comment_notification]").attr("disabled",false);R("input[name=comment_notification]").attr("checked",(l.opt_in==1)?true:false)}else{R("#comment_notification").hide();R("#notifyText").hide()}},error:function(l){R("#comment_notification").hide();
R("#notifyText").hide()}})};var j=function(){R.ajax({type:"POST",url:"/developerworks/maverick/execute/save_opt_in",data:"content_id="+A.ArticleID+"&hash="+I+"&notify="+(R("input[name=comment_notification]").attr("checked")?1:0),dataType:"json"})};dwc.afterSignIn=function(){F="true";R("#signInSect").hide();R("#newCmt").attr("disabled",false);R("#postCmt").attr("disabled",false);R("#newCmt").removeClass("dw-inoperable").addClass("dw-operable");R("#maxCharsCount").removeClass("ibm-form-note");R("#"+J).html(L+'&nbsp;(<a class="dw-view-comment" href="#icomments">'+dwc.view+"</a>&nbsp;|&nbsp;<a "+((F!="true")?'onclick="showSignIn(dwc.afterSignIn);return false;" href="#"':'href="#icomments"')+">"+dwc.addCmt+"</a>"+((F!="true")?" - "+dwc.signIn:"")+")");
S();R("#newCmt").focus()};c();F=e();var b="";b+=d();b+=T("topControl","selectComments","numCmts","dropdownCmts","howManyComments",true);b+='<div id="cmtSect"></div>';b=Y+'<div id="cmtTog" style="display:none">'+b+"</div>";b+=T("bottomControl","selectComments2","numCmts2","dropdownCmts2","howManyComments2",false);R("div#"+P).html(b);S();if(F!="true"){R("#newCmt").attr("disabled",true);R("#postCmt").attr("disabled",true)}else{R("#newCmt").removeClass("dw-inoperable").addClass("dw-operable");R("#maxCharsCount").removeClass("ibm-form-note")
}init=function(){W=0;L=0;U(function(){R("#cmtTog").show()})};init();R("#selectComments, #selectComments2").submit(function(l){(l.target.id=="selectComments")?R("#howManyComments2").val(R("#howManyComments").val()):R("#howManyComments").val(R("#howManyComments2").val());R("div#cmtSect").append(Y);if(R("#howManyComments, #howManyComments2").val()=="all"){U(function(){},"true");if(L>=N){R("#bottomControl").show()}}else{if(R("#howManyComments, #howManyComments2").val()=="recent"){R("#bottomControl").hide();
init()}}return false});var X=function(){if(R(this).val().length>H){R(this).val(R(this).val().substring(0,H))}R("#charCount").html((H-R(this).val().length))};R("#newCmt").keydown(X);R("#newCmt").keyup(X);R(":button#postCmt").click(function(){R("#cmtHead").removeClass("ibm-error");j();k();return false})});return jQuery};